project: prellm
generated: "2026-02-15T20:15:22.739735"
modules[30]{path,lang,items}:
  examples/python_sdk.py,python,8
  prellm/env_config.py,python,4
  prellm/cli.py,python,9
  prellm/server.py,python,9
  prellm/__init__.py,python,0
  prellm/query_decomposer.py,python,9
  prellm/prompt_registry.py,python,11
  prellm/models.py,python,0
  prellm/core.py,python,14
  prellm/llm_provider.py,python,4
  prellm/pipeline.py,python,12
  tests/test_one_function.py,python,20
  tests/test_edge_cases.py,python,17
  tests/test_promptguard.py,python,25
  tests/test_server.py,python,24
  tests/test_decomposer.py,python,14
  tests/test_env_config.py,python,21
  tests/__init__.py,python,0
  tests/test_context.py,python,7
  tests/test_v2_architecture.py,python,43
  tests/test_models.py,python,21
  tests/test_integration.py,python,22
  tests/test_prompt_registry.py,python,14
  tests/test_pipeline.py,python,16
  htmlcov/coverage_html_cb_dd2e7eb5.js,javascript,6
  prellm/chains/__init__.py,python,0
  prellm/chains/process_chain.py,python,6
  prellm/analyzers/bias_detector.py,python,2
  prellm/analyzers/__init__.py,python,0
  prellm/analyzers/context_engine.py,python,6

function_details:
  examples/python_sdk.py:
    functions[8]{name,kind,sig,loc,async,lines,cc,does}:
      example_one_function,function,(),16-45,true,30,4,The simplest way to use preLLM — like litellm.completion().
      example_domain_rules,function,(),52-75,true,24,2,Inline domain rules for safety checks.
      example_sync,function,(),82-91,false,10,1,Synchronous wrapper — no async needed.
      example_class_based,function,(),98-123,true,26,1,More control with the PreLLM class.
      example_openai_sdk,function,(),130-158,true,29,2,Use preLLM as an OpenAI drop-in replacement.
      example_batch,function,(),165-181,true,17,3,Batch multiple queries via the API.
      example_strategies,function,(),188-211,true,24,8,Demonstrate all 5 decomposition strategies.
      main,function,(),218-233,true,16,1,main
  prellm/env_config.py:
    functions[4]{name,kind,sig,loc,async,lines,cc,does}:
      load_dotenv_if_available,function,"(path:Any=None) -> None",68-85,false,18,12,Load .env file if it exists.
      get_env_config,function,"(dotenv_path:Any=None) -> EnvConfig",88-128,false,41,9,Read all config from environment variables (LiteLLM-compatible).
      check_providers,function,"(env:Any=None) -> dict[str, dict[str, Any]]",131-162,false,32,5,Check which providers are configured and reachable.
      check_providers_live,function,"(env:Any=None) -> dict[str, dict[str, Any]]",165-195,true,31,7,Check providers with live connectivity tests.
  prellm/cli.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      query,function,"(prompt:str=typer.Argument(..., help='The prompt/query to preprocess and execute'), small:str=typer.Option('ollama/qwen2.5:3b', '--small', '-s', help='Small LLM for preprocessing'), large:str=typer.Option('gpt-4o-mini', '--large', '-l', help='Large LLM for execution'), strategy:str=typer.Option('classify', '--strategy', '-S', help='Strategy: classify|structure|split|enrich|passthrough'), context:Optional[str]=typer.Option(None, '--context', '-C', help=\"User context tag (e.g. 'gdansk_embedded_python')\"), config:Optional[Path]=typer.Option(None, '--config', '-c', help='Optional YAML config file'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'))",26-64,false,39,9,"Preprocess a query with small LLM, then execute with large LLM."
      run,function,"(query:str=typer.Argument(..., help='The prompt/query to process'), config:Path=typer.Option('rules.yaml', '--config', '-c', help='Path to YAML config'), model:str=typer.Option('gpt-4o-mini', '--model', '-m', help='LLM model to use'), dry_run:bool=typer.Option(False, '--dry-run', '-d', help=\"Analyze only, don't call LLM\"), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'))",68-104,false,37,7,"[v0.1 compat] Run a single query through the old Prellm pipeline."
      process,function,"(config:Path=typer.Argument(..., help='Path to process chain YAML'), guard_config:Path=typer.Option('rules.yaml', '--guard-config', '-g', help='Path to guard YAML config'), dry_run:bool=typer.Option(False, '--dry-run', '-d', help='Analyze steps without calling LLM'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'), env:Optional[str]=typer.Option(None, '--env', '-e', help='Environment override (e.g., production)'))",108-144,false,37,6,Execute a DevOps process chain.
      analyze,function,"(query:str=typer.Argument(..., help='Query to analyze for bias/ambiguity'), config:Path=typer.Option('rules.yaml', '--config', '-c', help='Path to YAML config'))",148-166,false,19,5,Analyze a query without calling any LLM (bias detection + ambiguity check).
      decompose,function,"(query:str=typer.Argument(..., help='The prompt/query to decompose'), config:Path=typer.Option('configs/prellm_config.yaml', '--config', '-c', help='Path to preLLM v0.2 YAML config'), strategy:str=typer.Option('classify', '--strategy', '-s', help='Decomposition strategy: classify|structure|split|enrich|passthrough'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'))",170-206,false,37,7,"[v0.2] Decompose a query using small LLM without calling the large model."
      init,function,"(output:Path=typer.Option('rules.yaml', '--output', '-o', help='Output path for config'), devops:bool=typer.Option(False, '--devops', help='Include DevOps-specific patterns'), v2:bool=typer.Option(False, '--v2', help='Generate preLLM v0.2 config instead of v0.1'))",210-278,false,69,7,Generate a starter config file (v0.1 rules.yaml or v0.2 prellm_config.yaml).
      serve,function,"(host:str=typer.Option('0.0.0.0', '--host', '-H', help='Bind host'), port:int=typer.Option(8080, '--port', '-p', help='Bind port'), small:Optional[str]=typer.Option(None, '--small', '-s', help='Override small LLM (default: from .env)'), large:Optional[str]=typer.Option(None, '--large', '-l', help='Override large LLM (default: from .env)'), strategy:Optional[str]=typer.Option(None, '--strategy', '-S', help='Override strategy (default: from .env)'), config:Optional[Path]=typer.Option(None, '--config', '-c', help='YAML config file'), env_file:Optional[Path]=typer.Option(None, '--env-file', help='Path to .env file (default: .env)'), reload:bool=typer.Option(False, '--reload', help='Auto-reload on code changes (dev mode)'))",282-335,false,54,8,Start the OpenAI-compatible API server.
      doctor,function,"(env_file:Optional[Path]=typer.Option(None, '--env-file', help='Path to .env file'), live:bool=typer.Option(False, '--live', help='Test live connectivity to providers'))",339-416,false,78,15,Check configuration and provider connectivity.
      _run_guard,function,"(guard, query:str, model:str)",419-420,true,2,1,starts guard
  prellm/server.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      _parse_model_pair,function,"(model_str:str) -> tuple[str, str]",177-208,false,32,10,"Parse 'prellm:qwen→claude' or 'prellm:small→large' into (small, large) model str..."
      _build_prellm_meta,function,"(result:PreLLMResponse, strategy:str) -> PreLLMMeta",211-226,false,16,3,Build preLLM metadata from a PreLLMResponse.
      health,function,() -> HealthResponse,234-240,true,7,1,health
      list_models,function,(),244-252,true,9,1,List available model pairs.
      chat_completions,function,"(req:ChatCompletionRequest)",256-323,true,68,11,OpenAI-compatible chat completions with preLLM preprocessing.
      _stream_response,function,"(query:str, small:str, large:str, strategy:str, extras:PreLLMExtras) -> AsyncGenerator[str, None]",326-379,true,54,4,SSE streaming response with stage progress.
      batch_process,function,"(items:list[BatchItem])",383-406,true,24,3,Process multiple queries in parallel.
      create_app,function,"(small_model:Any=None, large_model:Any=None, strategy:Any=None, config_path:Any=None, master_key:Any=None, dotenv_path:Any=None) -> FastAPI",409-441,false,33,7,Factory function to create a configured preLLM API server.
      AuthMiddleware.dispatch,method,"(request:Request, call_next)",136-155,true,20,5,sends
  prellm/query_decomposer.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      QueryDecomposer.__init__,method,"(small_llm:LLMProvider, prompts:Any=None, domain_rules:Any=None)",45-53,false,9,3,creates
      QueryDecomposer.decompose,method,"(query:str, strategy:DecompositionStrategy=DecompositionStrategy.CLASSIFY, context:Any=None) -> DecompositionResult",55-111,true,57,7,Run the decomposition pipeline for the given strategy.
      QueryDecomposer._classify,method,"(query:str) -> ClassificationResult",113-127,true,15,2,Classify the query intent and domain using the small LLM.
      QueryDecomposer._structure,method,"(query:str) -> StructureResult",129-143,true,15,2,Extract structured fields from the query.
      QueryDecomposer._split,method,"(query:str) -> list[str]",145-158,true,14,4,Split a complex query into sub-queries.
      QueryDecomposer._enrich,method,"(query:str, result:DecompositionResult, context:Any) -> str",160-189,true,30,7,Enrich the query with missing context using the small LLM.
      QueryDecomposer._compose,method,"(query:str, result:DecompositionResult, context:Any) -> str",191-236,true,46,9,Compose the final prompt for the large LLM.
      QueryDecomposer._match_domain_rule,method,"(query:str, classification:ClassificationResult) -> DomainRule | None",238-265,false,28,8,Find the best matching domain rule for the query.
      QueryDecomposer._find_missing_fields,method,"(query:str, rule:DomainRule, context:Any) -> list[str]",268-283,false,16,5,Determine which required fields are missing from the query and context.
  prellm/prompt_registry.py:
    functions[11]{name,kind,sig,loc,async,lines,cc,does}:
      PromptEntry.__init__,method,"(name:str, system_template:str, max_tokens:int=512, temperature:float=0.1)",35-39,false,5,1,creates
      PromptEntry.__repr__,method,() -> str,41-42,false,2,1,repr
      PromptRegistry.__init__,method,"(prompts_path:Any=None)",54-58,false,5,2,creates
      PromptRegistry._ensure_loaded,method,() -> None,60-62,false,3,2,ensure loaded
      PromptRegistry._load,method,() -> None,64-87,false,24,6,Load prompts from the YAML file.
      PromptRegistry.get,method,"(prompt_name:str) -> str",89-108,false,20,2,Get a rendered prompt by name with Jinja2 variable substitution.
      PromptRegistry.get_entry,method,"(name:str) -> PromptEntry",110-126,false,17,2,Get the full PromptEntry (template + max_tokens + temperature).
      PromptRegistry.list_prompts,method,"() -> list[str]",128-131,false,4,1,List all available prompt names.
      PromptRegistry.validate,method,"() -> list[str]",133-154,false,22,5,Validate that all prompts have non-empty templates.
      PromptRegistry.register,method,"(name:str, system_template:str, max_tokens:int=512, temperature:float=0.1) -> None",156-164,false,9,1,Register a prompt programmatically (useful for testing or dynamic prompts).
      PromptRegistry._render,method,"(template_str:str, variables:dict[str,Any]) -> str",166-174,false,9,3,Render a Jinja2 template string with variables.
  prellm/core.py:
    functions[14]{name,kind,sig,loc,async,lines,cc,does}:
      preprocess_and_execute,function,"(query:str, small_llm:str='ollama/qwen2.5:3b', large_llm:str='anthropic/claude-sonnet-4-20250514', strategy:Any='classify', user_context:Any=None, config_path:Any=None, domain_rules:Any=None) -> PreLLMResponse",48-126,true,79,11,One function to preprocess and execute — like litellm.completion() but with smal...
      preprocess_and_execute_sync,function,"(query:str, small_llm:str='ollama/qwen2.5:3b', large_llm:str='anthropic/claude-sonnet-4-20250514', strategy:Any='classify', user_context:Any=None, config_path:Any=None, domain_rules:Any=None) -> PreLLMResponse",130-156,false,27,1,Synchronous version of preprocess_and_execute() — runs the async function in an...
      PreLLM.__init__,method,"(config_path:Any=None, config:Any=None)",175-195,false,21,3,creates
      PreLLM.__call__,method,"(query:str, strategy:Any=None, extra_context:Any=None) -> PreLLMResponse",197-257,true,61,6,"Full pipeline: context → decompose (small LLM) → large LLM → response."
      PreLLM.decompose_only,method,"(query:str, strategy:Any=None, extra_context:Any=None) -> dict[str, Any]",259-287,true,29,5,Run decomposition without calling the large LLM — useful for dry-run / testing.
      PreLLM.get_audit_log,method,"() -> list[dict[str, Any]]",289-291,false,3,2,Return audit log as list of dicts.
      PreLLM._audit,method,"(action:str, query:str, response:PreLLMResponse) -> None",293-305,false,13,3,audit
      PreLLM._load_config,method,"(path:Path) -> PreLLMConfig",308-348,false,41,10,Load preLLM v0.2 config from YAML file.
      prellm.__init__,method,"(config_path:Any=None, config:Any=None)",365-379,false,15,4,creates
      prellm.__call__,method,"(query:str, model:Any=None, extra_context:Any=None) -> GuardResponse",381-447,true,67,11,"Analyze query, enrich if needed, call LLM, validate response."
      prellm.analyze_only,method,"(query:str) -> dict[str, Any]",449-460,false,12,2,Run analysis without calling LLM — useful for dry-run / testing.
      prellm.get_audit_log,method,"() -> list[dict[str, Any]]",462-464,false,3,2,Return audit log as list of dicts.
      prellm._audit,method,"(action:str, query:str, response:GuardResponse, model:str) -> None",466-474,false,9,2,audit
      prellm._load_config,method,"(path:Path) -> GuardConfig",477-498,false,22,5,Load config from YAML file.
  prellm/llm_provider.py:
    functions[4]{name,kind,sig,loc,async,lines,cc,does}:
      LLMProvider.__init__,method,"(config:LLMProviderConfig)",26-27,false,2,1,creates
      LLMProvider.complete,method,"(user_message:str, system_prompt:str='', response_format:Any=None) -> str",29-87,true,59,9,Send a completion request with retry/fallback.
      LLMProvider.complete_json,method,"(user_message:str, system_prompt:str='') -> dict[str, Any]",89-106,true,18,1,Complete and parse response as JSON.
      LLMProvider._parse_json,method,"(text:str) -> dict[str, Any]",109-141,false,33,10,Best-effort JSON extraction from LLM output.
  prellm/pipeline.py:
    functions[12]{name,kind,sig,loc,async,lines,cc,does}:
      PromptPipeline.__init__,method,"(config:PipelineConfig, registry:PromptRegistry, small_llm:LLMProvider, validators:Any=None)",87-103,false,17,2,creates
      PromptPipeline.from_yaml,method,"(pipelines_path:Any, pipeline_name:str, registry:Any=None, small_llm:Any=None, validators:Any=None) -> PromptPipeline",106-167,false,62,6,Load a named pipeline from a YAML file.
      PromptPipeline.execute,method,"(query:str, context:Any=None) -> PipelineResult",169-237,true,69,9,"Execute pipeline step by step, collecting intermediate results."
      PromptPipeline._execute_llm_step,method,"(step:PipelineStep, state:dict[str,Any]) -> Any",239-261,true,23,1,Execute an LLM step — call small_llm with prompt from registry.
      PromptPipeline._execute_algo_step,method,"(step:PipelineStep, state:dict[str,Any]) -> Any",263-271,false,9,3,Execute an algorithmic (non-LLM) step.
      PromptPipeline._gather_inputs,method,"(step:PipelineStep, state:dict[str,Any]) -> dict[str, Any]",273-284,false,12,4,Gather input values from state for a step.
      PromptPipeline._build_user_message,method,"(step:PipelineStep, state:dict[str,Any]) -> str",286-297,false,12,5,Build user message string from step inputs.
      PromptPipeline._evaluate_condition,method,"(condition:str, state:dict[str,Any]) -> bool",299-310,false,12,2,Safely evaluate a condition string against state.
      PromptPipeline.register_algo_handler,method,"(name:str, handler:Callable[Ellipsis,Any]) -> None",312-314,false,3,1,Register a custom algorithmic step handler.
      PromptPipeline._algo_domain_rule_matcher,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> dict[str, Any]",321-343,false,23,9,Match classification against domain rules in context.
      PromptPipeline._algo_field_validator,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> list[str]",346-359,false,14,5,Validate extracted fields against required fields from matched rule.
      PromptPipeline._algo_yaml_formatter,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> dict[str, Any]",362-377,false,16,4,Format pipeline state into structured executor input.
  tests/test_one_function.py:
    functions[20]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_litellm_response,function,"(content:str) -> MagicMock",16-20,false,5,1,mock litellm response
      TestPreprocessAndExecute.test_zero_config,method,(),27-43,true,17,1,Just query — everything else defaults.
      TestPreprocessAndExecute.test_custom_models,method,(),46-66,true,21,1,Specify both small and large models.
      TestPreprocessAndExecute.test_passthrough_strategy,method,(),69-81,true,13,1,Passthrough skips small LLM entirely.
      TestPreprocessAndExecute.test_strategy_as_enum,method,(),84-94,true,11,1,Strategy can be passed as enum.
      TestPreprocessAndExecute.test_user_context_string,method,(),97-114,true,18,1,User context as a string tag gets injected.
      TestPreprocessAndExecute.test_user_context_dict,method,(),117-135,true,19,1,User context as a dict gets injected.
      TestPreprocessAndExecute.test_with_domain_rules,method,(),138-164,true,27,1,Inline domain rules get matched.
      TestPreprocessAndExecute.test_with_config_path,method,(tmp_path),167-197,true,31,1,Load config from YAML file.
      TestPreprocessAndExecute.test_config_path_with_model_override,method,(tmp_path),200-230,true,31,1,Config from file but override models.
      TestPreprocessAndExecute.test_large_llm_failure,method,(),233-252,true,20,1,Large LLM failure returns fallback response.
      TestPreprocessAndExecute.test_structure_strategy,method,(),255-280,true,26,1,Structure strategy extracts fields.
      TestPreprocessAndExecute.test_split_strategy,method,(),283-306,true,24,1,Split strategy breaks query into sub-queries.
      TestPreprocessAndExecute.test_returns_prellm_response,method,(),309-322,true,14,1,Result is always a PreLLMResponse.
      TestPreprocessAndExecute.test_kwargs_forwarded,method,(),325-337,true,13,1,Extra kwargs like max_tokens are forwarded to config.
      TestPreprocessAndExecuteSync.test_sync_wrapper_works,method,(),343-353,false,11,1,checks sync wrapper works
      TestImportFromPackage.test_import_async,method,(),359-361,false,3,1,checks import async
      TestImportFromPackage.test_import_sync,method,(),363-365,false,3,1,checks import sync
      TestImportFromPackage.test_version,method,(),367-369,false,3,1,checks version
      TestImportFromPackage.test_all_exports,method,(),371-376,false,6,1,checks all exports
  tests/test_edge_cases.py:
    functions[17]{name,kind,sig,loc,async,lines,cc,does}:
      TestPolishPatterns.test_polish_deploy_production,method,(),12-16,false,5,1,checks polish deploy production
      TestPolishPatterns.test_polish_delete_database,method,(),18-22,false,5,2,checks polish delete database
      TestPolishPatterns.test_polish_always_bias,method,(),24-27,false,4,1,checks polish always bias
      TestPolishPatterns.test_polish_only_bias,method,(),29-32,false,4,1,checks polish only bias
      TestPolishPatterns.test_polish_safe_long_query,method,(),34-37,false,4,1,checks polish safe long query
      TestMixedLanguage.test_polish_english_mix,method,(),41-44,false,4,1,checks polish english mix
      TestMixedLanguage.test_english_with_polish_verbs,method,(),46-50,false,5,1,checks english with polish verbs
      TestMixedLanguage.test_polish_verb_no_target,method,(),52-55,false,4,1,checks polish verb no target
      TestBoundaryConditions.test_empty_query,method,(),59-62,false,4,1,checks empty query
      TestBoundaryConditions.test_single_word,method,(),64-67,false,4,1,checks single word
      TestBoundaryConditions.test_very_long_safe_query,method,(),69-73,false,5,1,checks very long safe query
      TestBoundaryConditions.test_case_insensitive_patterns,method,(),75-78,false,4,1,checks case insensitive patterns
      TestBoundaryConditions.test_no_false_positive_on_partial_match,method,(),80-84,false,5,1,checks no false positive on partial match
      TestBoundaryConditions.test_multiple_patterns_detected,method,(),86-90,false,5,1,checks multiple patterns detected
      TestBoundaryConditions.test_custom_empty_patterns,method,(),92-95,false,4,1,checks custom empty patterns
      TestBoundaryConditions.test_default_patterns_count,method,(),97-98,false,2,1,checks default patterns count
      TestBoundaryConditions.test_severity_levels,method,(),100-104,false,5,3,checks severity levels
  tests/test_promptguard.py:
    functions[25]{name,kind,sig,loc,async,lines,cc,does}:
      TestBiasDetector.test_detects_absolute_quantifier_pl,method,(),29-33,false,5,2,checks detects absolute quantifier pl
      TestBiasDetector.test_detects_absolute_quantifier_en,method,(),35-38,false,4,1,checks detects absolute quantifier en
      TestBiasDetector.test_detects_production_deploy,method,(),40-44,false,5,2,checks detects production deploy
      TestBiasDetector.test_detects_destructive_db_operation,method,(),46-50,false,5,2,checks detects destructive db operation
      TestBiasDetector.test_detects_short_query,method,(),52-56,false,5,1,checks detects short query
      TestBiasDetector.test_detects_devops_without_target,method,(),58-62,false,5,2,checks detects devops without target
      TestBiasDetector.test_clean_query_passes,method,(),64-67,false,4,1,checks clean query passes
      TestBiasDetector.test_custom_patterns,method,(),69-73,false,5,1,checks custom patterns
      TestBiasDetector.test_no_patterns_match,method,(),75-78,false,4,1,checks no patterns match
      TestContextEngine.test_env_context,method,(monkeypatch),84-90,false,7,1,checks env context
      TestContextEngine.test_enrich_prompt,method,(monkeypatch),92-96,false,5,1,checks enrich prompt
      TestContextEngine.test_extra_context_override,method,(monkeypatch),98-102,false,5,1,checks extra context override
      TestContextEngine.test_missing_env_graceful,method,(),104-107,false,4,1,checks missing env graceful
      TestContextEngine.test_system_context,method,(),109-114,false,6,1,checks system context
      TestprellmCore.test_load_inline_config,method,(),120-124,false,5,1,checks load inline config
      TestprellmCore.test_analyze_only,method,(),126-129,false,4,1,checks analyze only
      TestprellmCore.test_analyze_only_clean,method,(),131-134,false,4,1,checks analyze only clean
      TestprellmCore.test_call_with_mock_litellm,method,(),137-148,true,12,1,checks call with mock litellm
      TestprellmCore.test_call_with_clarification,method,(),151-162,true,12,1,checks call with clarification
      TestprellmCore.test_audit_log,method,(),164-166,false,3,1,checks audit log
      TestProcessChainConfig.test_process_config_model,method,(),172-181,false,10,1,checks process config model
      TestProcessChainConfig.test_step_dependencies,method,(),183-185,false,3,1,checks step dependencies
      TestModels.test_guard_response_defaults,method,(),191-195,false,5,1,checks guard response defaults
      TestModels.test_analysis_result,method,(),197-203,false,7,1,checks analysis result
      TestModels.test_config_defaults,method,(),205-208,false,4,1,checks config defaults
  tests/test_server.py:
    functions[24]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_litellm_response,function,"(content:str) -> MagicMock",14-18,false,5,1,mock litellm response
      _mock_completion_side_effect,function,(),21-32,false,12,1,Returns a side_effect that handles small LLM (classify+compose) then large LLM.
      TestParseModelPair.test_default,method,(),36-39,false,4,1,checks default
      TestParseModelPair.test_arrow_unicode,method,(),41-44,false,4,1,checks arrow unicode
      TestParseModelPair.test_arrow_ascii,method,(),46-49,false,4,1,checks arrow ascii
      TestParseModelPair.test_single_model,method,(),51-53,false,3,1,checks single model
      TestParseModelPair.test_no_prefix,method,(),55-58,false,4,1,checks no prefix
      TestHealthEndpoint.test_health,method,(),62-68,false,7,1,checks health
      TestHealthEndpoint.test_models,method,(),70-76,false,7,1,checks models
      TestChatCompletions.test_basic_completion,method,(),80-94,false,15,1,checks basic completion
      TestChatCompletions.test_with_prellm_extras,method,(),96-111,false,16,1,checks with prellm extras
      TestChatCompletions.test_with_yaml_response_format,method,(),113-122,false,10,1,checks with yaml response format
      TestChatCompletions.test_prellm_meta_in_response,method,(),124-137,false,14,1,checks prellm meta in response
      TestChatCompletions.test_passthrough_strategy,method,(),139-153,false,15,1,checks passthrough strategy
      TestChatCompletions.test_empty_messages_error,method,(),155-161,false,7,1,checks empty messages error
      TestChatCompletions.test_no_user_message_error,method,(),163-169,false,7,1,checks no user message error
      TestChatCompletions.test_usage_info,method,(),171-182,false,12,1,checks usage info
      TestChatCompletions.test_with_domain_rules,method,(),184-212,false,29,1,checks with domain rules
      TestChatCompletions.test_max_tokens_and_temperature,method,(),214-224,false,11,1,checks max tokens and temperature
      TestStreamingEndpoint.test_streaming_response,method,(),228-245,false,18,3,checks streaming response
      TestStreamingEndpoint.test_streaming_with_stages,method,(),247-260,false,14,1,checks streaming with stages
      TestBatchEndpoint.test_batch_processing,method,(),264-286,false,23,1,checks batch processing
      TestBatchEndpoint.test_batch_empty_error,method,(),288-291,false,4,1,checks batch empty error
      TestCreateApp.test_factory_function,method,(),295-301,false,7,1,checks factory function
  tests/test_decomposer.py:
    functions[14]{name,kind,sig,loc,async,lines,cc,does}:
      TestLLMProvider.test_complete_returns_content,method,(),25-34,true,10,1,checks complete returns content
      TestLLMProvider.test_complete_with_system_prompt,method,(),37-50,true,14,1,checks complete with system prompt
      TestLLMProvider.test_complete_json_parses,method,(),53-63,true,11,1,checks complete json parses
      TestLLMProvider.test_complete_json_handles_markdown_fence,method,(),66-75,true,10,1,checks complete json handles markdown fence
      TestLLMProvider.test_complete_json_returns_empty_on_bad_json,method,(),78-87,true,10,1,checks complete json returns empty on bad json
      TestLLMProvider.test_fallback_on_failure,method,(),90-109,true,20,1,checks fallback on failure
      TestLLMProvider.test_all_models_fail,method,(),112-119,true,8,1,checks all models fail
      TestQueryDecomposer._make_decomposer,method,"(domain_rules:Any=None) -> tuple[QueryDecomposer, LLMProvider]",125-136,false,12,2,creates decomposer
      TestQueryDecomposer.test_passthrough_strategy,method,(),139-144,true,6,1,checks passthrough strategy
      TestQueryDecomposer.test_classify_strategy,method,(),147-164,true,18,1,checks classify strategy
      TestQueryDecomposer.test_structure_strategy,method,(),167-180,true,14,1,checks structure strategy
      TestQueryDecomposer.test_split_strategy,method,(),183-196,true,14,1,checks split strategy
      TestQueryDecomposer.test_enrich_strategy,method,(),199-217,true,19,1,checks enrich strategy
      TestQueryDecomposer.test_missing_fields_from_domain_rules,method,(),220-237,true,18,1,checks missing fields from domain rules
  tests/test_env_config.py:
    functions[21]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_resp,function,"(content:str) -> MagicMock",310-314,false,5,1,mock resp
      TestEnvConfigDefaults.test_default_config,method,(),20-29,false,10,1,checks default config
      TestEnvConfigDefaults.test_provider_key_map_has_all_providers,method,(),31-37,false,7,1,checks provider key map has all providers
      TestLoadDotenv.test_load_env_file,method,(tmp_path),41-65,false,25,3,checks load env file
      TestLoadDotenv.test_load_env_does_not_override_existing,method,(tmp_path),67-75,false,9,1,checks load env does not override existing
      TestLoadDotenv.test_load_env_strips_quotes,method,(tmp_path),77-93,false,17,3,checks load env strips quotes
      TestLoadDotenv.test_load_nonexistent_file,method,(),95-97,false,3,1,checks load nonexistent file
      TestGetEnvConfig.test_reads_from_env,method,(),101-125,false,25,1,checks reads from env
      TestGetEnvConfig.test_reads_from_dotenv_file,method,(tmp_path),127-143,false,17,3,checks reads from dotenv file
      TestGetEnvConfig.test_litellm_compat_env_vars,method,(),145-157,false,13,1,LiteLLM env vars (OPENAI_API_KEY etc.) are detected in providers.
      TestGetEnvConfig.test_small_model_fallback_to_old_env,method,(),159-166,false,8,1,SMALL_MODEL env var (old name) still works.
      TestGetEnvConfig.test_empty_master_key_is_none,method,(),168-171,false,4,1,checks empty master key is none
      TestGetEnvConfig.test_ollama_base_url,method,(),173-176,false,4,1,checks ollama base url
      TestCheckProviders.test_check_with_keys,method,(),180-191,false,12,1,checks check with keys
      TestCheckProviders.test_check_without_keys,method,(),193-202,false,10,2,checks check without keys
      TestAuthMiddleware.test_no_auth_when_no_master_key,method,(),208-226,false,19,1,checks no auth when no master key
      TestAuthMiddleware.test_auth_required_when_master_key_set,method,(),228-245,false,18,1,checks auth required when master key set
      TestAuthMiddleware.test_auth_with_bearer_token,method,(),247-267,false,21,1,checks auth with bearer token
      TestAuthMiddleware.test_auth_with_x_api_key,method,(),269-288,false,20,1,checks auth with x api key
      TestAuthMiddleware.test_wrong_key_rejected,method,(),290-302,false,13,1,checks wrong key rejected
      TestAuthMiddleware.teardown_method,method,(),304-307,false,4,1,Reset master key after each test.
  tests/test_context.py:
    functions[7]{name,kind,sig,loc,async,lines,cc,does}:
      TestContextEngine.test_env_context,method,(monkeypatch),10-16,false,7,1,checks env context
      TestContextEngine.test_enrich_prompt,method,(monkeypatch),18-22,false,5,1,checks enrich prompt
      TestContextEngine.test_extra_overrides_env,method,(monkeypatch),24-28,false,5,1,checks extra overrides env
      TestContextEngine.test_missing_env_graceful,method,(),30-33,false,4,1,checks missing env graceful
      TestContextEngine.test_system_context,method,(),35-40,false,6,1,checks system context
      TestContextEngine.test_empty_sources,method,(),42-44,false,3,1,checks empty sources
      TestContextEngine.test_multiple_sources,method,(monkeypatch),46-54,false,9,1,checks multiple sources
  tests/test_v2_architecture.py:
    functions[43]{name,kind,sig,loc,async,lines,cc,does}:
      TestLLMProvider.test_init_with_config,method,(),34-38,false,5,1,checks init with config
      TestLLMProvider.test_complete_success,method,(),41-52,true,12,1,checks complete success
      TestLLMProvider.test_complete_with_system_prompt,method,(),55-69,true,15,1,checks complete with system prompt
      TestLLMProvider.test_complete_fallback,method,(),72-92,true,21,1,checks complete fallback
      TestLLMProvider.test_complete_all_fail,method,(),95-101,true,7,1,checks complete all fail
      TestLLMProvider.test_complete_json_success,method,(),104-116,true,13,1,checks complete json success
      TestLLMProvider.test_parse_json_direct,method,(),118-120,false,3,1,checks parse json direct
      TestLLMProvider.test_parse_json_markdown_block,method,(),122-125,false,4,1,checks parse json markdown block
      TestLLMProvider.test_parse_json_embedded,method,(),127-130,false,4,1,checks parse json embedded
      TestLLMProvider.test_parse_json_invalid,method,(),132-134,false,3,1,checks parse json invalid
      TestQueryDecomposer._make_decomposer,method,"(llm_response:str='{\"intent\": \"deploy\", \"confidence\": 0.9, \"domain\": \"devops\"}')",142-167,false,26,1,creates decomposer
      TestQueryDecomposer.test_passthrough_strategy,method,(),170-175,true,6,1,checks passthrough strategy
      TestQueryDecomposer.test_classify_strategy,method,(),178-203,true,26,1,checks classify strategy
      TestQueryDecomposer.test_structure_strategy,method,(),206-219,true,14,1,checks structure strategy
      TestQueryDecomposer.test_split_strategy,method,(),222-237,true,16,1,checks split strategy
      TestQueryDecomposer.test_enrich_strategy,method,(),240-253,true,14,1,checks enrich strategy
      TestQueryDecomposer.test_match_domain_rule_by_keyword,method,(),255-260,false,6,1,checks match domain rule by keyword
      TestQueryDecomposer.test_match_domain_rule_by_intent,method,(),262-267,false,6,1,checks match domain rule by intent
      TestQueryDecomposer.test_no_domain_rule_match,method,(),269-273,false,5,1,checks no domain rule match
      TestQueryDecomposer.test_find_missing_fields,method,(),275-286,false,12,1,checks find missing fields
      TestQueryDecomposer.test_classify_failure_graceful,method,(),289-296,true,8,1,checks classify failure graceful
      TestDomainRule.test_defaults,method,(),304-309,false,6,1,checks defaults
      TestDomainRule.test_full_rule,method,(),311-323,false,13,1,checks full rule
      TestPreLLMConfig.test_defaults,method,(),331-336,false,6,1,checks defaults
      TestPreLLMConfig.test_custom_config,method,(),338-347,false,10,1,checks custom config
      TestPreLLMCore.test_init_default,method,(),355-358,false,4,1,checks init default
      TestPreLLMCore.test_init_with_config,method,(),360-366,false,7,1,checks init with config
      TestPreLLMCore.test_full_pipeline,method,(),369-408,true,40,1,checks full pipeline
      TestPreLLMCore.test_decompose_only,method,(),411-439,true,29,1,checks decompose only
      TestPreLLMCore.test_passthrough_strategy,method,(),442-457,true,16,1,checks passthrough strategy
      TestPreLLMCore.test_audit_log_empty,method,(),459-461,false,3,1,checks audit log empty
      TestPreLLMCore.test_large_llm_failure,method,(),464-477,true,14,1,checks large llm failure
      TestPreLLMConfigLoading.test_load_yaml_config,method,(tmp_path),485-506,false,22,1,checks load yaml config
      TestPreLLMConfigLoading.test_load_empty_yaml,method,(tmp_path),508-515,false,8,1,checks load empty yaml
      TestPreLLMConfigLoading.test_load_shipped_config,method,(),517-523,false,7,2,checks load shipped config
      TestProcessChainV2.test_chain_with_v2_engine_dry_run,method,(),532-568,true,37,2,checks chain with v2 engine dry run
      TestProcessChainV2.test_chain_per_step_strategy,method,(),571-611,true,41,1,checks chain per step strategy
      TestDecompositionResult.test_defaults,method,(),619-626,false,8,1,checks defaults
      TestDecompositionResult.test_full_result,method,(),628-640,false,13,1,checks full result
      TestPreLLMResponse.test_defaults,method,(),644-649,false,6,1,checks defaults
      TestPreLLMResponse.test_with_decomposition,method,(),651-664,false,14,1,checks with decomposition
      TestDecompositionStrategy.test_all_strategies,method,(),668-673,false,6,1,checks all strategies
      TestDecompositionStrategy.test_from_string,method,(),675-677,false,3,1,checks from string
  tests/test_models.py:
    functions[21]{name,kind,sig,loc,async,lines,cc,does}:
      TestModelDefaults.test_llm_provider_config_defaults,method,(),30-34,false,5,1,checks llm provider config defaults
      TestModelDefaults.test_prellm_config_defaults,method,(),36-43,false,8,1,checks prellm config defaults
      TestModelDefaults.test_response_defaults,method,(),45-49,false,5,1,checks response defaults
      TestModelDefaults.test_decomposition_result_defaults,method,(),51-57,false,7,1,checks decomposition result defaults
      TestModelDefaults.test_classification_result,method,(),59-62,false,4,1,checks classification result
      TestModelDefaults.test_structure_result,method,(),64-67,false,4,1,checks structure result
      TestModelDefaults.test_audit_entry,method,(),69-75,false,7,1,checks audit entry
      TestDomainRules.test_rule_with_all_fields,method,(),79-89,false,11,1,checks rule with all fields
      TestDomainRules.test_rule_keyword_matching,method,(),91-94,false,4,2,checks rule keyword matching
      TestDomainRules.test_rule_no_match,method,(),96-99,false,4,2,checks rule no match
      TestDecompositionStrategy.test_all_strategies_exist,method,(),103-109,false,7,2,checks all strategies exist
      TestDecompositionStrategy.test_strategy_from_string,method,(),111-113,false,3,1,checks strategy from string
      TestConfigLoading._write_yaml,method,"(data:dict) -> str",117-121,false,5,1,logs yaml
      TestConfigLoading.test_load_minimal_config,method,(),123-128,false,6,1,checks load minimal config
      TestConfigLoading.test_load_with_models,method,(),130-140,false,11,1,checks load with models
      TestConfigLoading.test_load_with_domain_rules,method,(),142-152,false,11,1,checks load with domain rules
      TestConfigLoading.test_load_with_prompts,method,(),154-164,false,11,1,checks load with prompts
      TestConfigLoading.test_load_empty_config,method,(),166-170,false,5,1,checks load empty config
      TestConfigLoading.test_shipped_config_loads,method,(),172-178,false,7,2,checks shipped config loads
      TestProcessModels.test_process_step_with_strategy,method,(),182-190,false,9,1,checks process step with strategy
      TestProcessModels.test_process_config,method,(),192-201,false,10,1,checks process config
  tests/test_integration.py:
    functions[22]{name,kind,sig,loc,async,lines,cc,does}:
      TestYAMLConfigLoading._write_yaml,method,"(data:dict) -> str",28-32,false,5,1,logs yaml
      TestYAMLConfigLoading.test_load_minimal_config,method,(),34-39,false,6,1,checks load minimal config
      TestYAMLConfigLoading.test_load_full_config,method,(),41-57,false,17,1,checks load full config
      TestYAMLConfigLoading.test_load_empty_config,method,(),59-63,false,5,1,checks load empty config
      TestYAMLConfigLoading.test_configs_rules_yaml,method,(),65-71,false,7,2,Test that the shipped configs/rules.yaml loads correctly.
      TestAnalyzeOnly.test_production_deploy_detected,method,(),77-80,false,4,1,checks production deploy detected
      TestAnalyzeOnly.test_db_delete_detected,method,(),82-85,false,4,1,checks db delete detected
      TestAnalyzeOnly.test_safe_query_passes,method,(),87-92,false,6,1,checks safe query passes
      TestAnalyzeOnly.test_short_devops_query_flagged,method,(),94-97,false,4,1,checks short devops query flagged
      TestAnalyzeOnly.test_scale_operation_detected,method,(),99-102,false,4,1,checks scale operation detected
      TestAnalyzeOnly.test_config_change_detected,method,(),104-107,false,4,1,checks config change detected
      TestAnalyzeOnly.test_polish_migration_detected,method,(),109-112,false,4,1,checks polish migration detected
      TestProcessChainDryRun._make_chain,method,"(steps:list[ProcessStep]) -> ProcessChain",118-121,false,4,1,creates chain
      TestProcessChainDryRun.test_simple_chain_dry_run,method,(),124-132,true,9,2,checks simple chain dry run
      TestProcessChainDryRun.test_chain_with_manual_approval_pauses,method,(),135-145,true,11,1,checks chain with manual approval pauses
      TestProcessChainDryRun.test_chain_with_approval_callback,method,(),148-165,true,18,1,checks chain with approval callback
      TestProcessChainDryRun.test_chain_dependency_failure,method,(),168-174,true,7,1,checks chain dependency failure
      TestProcessChainDryRun.test_chain_context_injection,method,(monkeypatch),177-187,true,11,1,checks chain context injection
      TestProcessChainDryRun.test_chain_extra_context,method,(),190-195,true,6,1,checks chain extra context
      TestProcessChainDryRun.test_chain_timing,method,(),198-205,true,8,1,checks chain timing
      TestProcessChainDryRun.test_chain_audit_trail,method,(),208-222,true,15,1,checks chain audit trail
      TestDeployConfig.test_deploy_yaml_loads,method,(),228-239,false,12,2,checks deploy yaml loads
  tests/test_prompt_registry.py:
    functions[14]{name,kind,sig,loc,async,lines,cc,does}:
      sample_prompts_yaml,function,"(tmp_path:Path) -> Path",15-53,false,39,1,Create a temporary prompts.yaml for testing.
      registry,function,"(sample_prompts_yaml:Path) -> PromptRegistry",57-58,false,2,1,registry
      test_prompt_registry_loads_yaml,function,"(registry:PromptRegistry)",61-69,false,9,1,Registry loads all prompts from YAML file.
      test_prompt_registry_get_with_variables,function,"(registry:PromptRegistry)",72-76,false,5,1,Registry renders Jinja2 variables in prompts.
      test_prompt_registry_get_with_default,function,"(registry:PromptRegistry)",79-82,false,4,1,Registry uses Jinja2 default filter when variable not provided.
      test_prompt_registry_get_conditional,function,"(registry:PromptRegistry)",85-91,false,7,1,Registry handles Jinja2 conditionals.
      test_prompt_registry_missing_prompt_raises,function,"(registry:PromptRegistry)",94-97,false,4,1,Registry raises PromptNotFoundError for missing prompts.
      test_prompt_registry_validate_all_required,function,"(registry:PromptRegistry)",100-103,false,4,1,Registry validates that all required prompts exist.
      test_prompt_registry_validate_missing_required,function,"(tmp_path:Path)",106-114,false,9,2,Registry reports missing required prompts.
      test_prompt_registry_get_entry,function,"(registry:PromptRegistry)",117-123,false,7,1,Registry returns full PromptEntry with metadata.
      test_prompt_registry_caching,function,"(registry:PromptRegistry)",126-135,false,10,1,Registry loads YAML only once (lazy loading).
      test_prompt_registry_register_programmatic,function,"(registry:PromptRegistry)",138-143,false,6,1,Registry supports programmatic prompt registration.
      test_prompt_registry_nonexistent_file,function,(),146-149,false,4,1,Registry handles missing YAML file gracefully.
      test_prompt_registry_default_path,function,(),152-157,false,6,1,Registry uses default configs/prompts.yaml path.
  tests/test_pipeline.py:
    functions[16]{name,kind,sig,loc,async,lines,cc,does}:
      sample_prompts_yaml,function,"(tmp_path:Path) -> Path",23-61,false,39,1,sample prompts yaml
      sample_pipelines_yaml,function,"(tmp_path:Path) -> Path",65-120,false,56,1,sample pipelines yaml
      registry,function,"(sample_prompts_yaml:Path) -> PromptRegistry",124-125,false,2,1,registry
      mock_llm,function,() -> LLMProvider,129-138,false,10,1,Create a mock LLMProvider that returns predictable JSON.
      _make_pipeline,function,"(registry:PromptRegistry, mock_llm:LLMProvider, steps:list[dict], name:str='test') -> PromptPipeline",141-151,false,11,2,creates pipeline
      test_pipeline_sequential_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",155-169,true,15,1,"Pipeline executes steps sequentially, propagating state."
      test_pipeline_conditional_step_skip,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",173-192,true,20,1,Pipeline skips steps whose condition evaluates to False.
      test_pipeline_conditional_step_executes,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",196-215,true,20,1,Pipeline executes steps whose condition evaluates to True.
      test_pipeline_algo_step_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",219-234,true,16,1,Pipeline executes algorithmic (non-LLM) steps.
      test_pipeline_llm_step_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",238-248,true,11,2,Pipeline LLM steps call complete_json on small_llm.
      test_pipeline_state_propagation,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",252-272,true,21,1,State from earlier steps is available to later steps.
      test_pipeline_from_yaml_config,function,"(sample_pipelines_yaml:Path, registry:PromptRegistry, mock_llm:LLMProvider)",276-291,true,16,1,Pipeline loads correctly from YAML file.
      test_pipeline_from_yaml_missing_pipeline,function,"(sample_pipelines_yaml:Path)",294-300,false,7,1,Loading a non-existent pipeline raises KeyError.
      test_pipeline_missing_prompt_error,function,"(mock_llm:LLMProvider)",304-313,true,10,2,Pipeline with a prompt not in registry fails gracefully.
      test_pipeline_custom_validator,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",317-333,true,17,1,Pipeline supports custom algorithmic step handlers.
      test_pipeline_empty_passthrough,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",337-345,true,9,1,Empty pipeline (passthrough) returns state with just query and context.
  htmlcov/coverage_html_cb_dd2e7eb5.js:
    functions[6]{name,kind,sig,loc,async,lines,cc,does}:
      debounce,function,"(callback, wait)",11-19,false,9,1,debounce
      checkVisible,function,(element),21-26,false,6,1,checks visible
      on_click,function,"(sel, fn)",28-33,false,6,1,handles click
      getCellValue,function,(row),36-48,false,13,1,retrieves cell value
      rowComparator,function,"(rowA, rowB)",50-57,false,8,1,row comparator
      sortColumn,function,(th),59-110,false,52,1,sorts column
  prellm/chains/process_chain.py:
    functions[6]{name,kind,sig,loc,async,lines,cc,does}:
      ProcessChain.__init__,method,"(config_path:Any=None, config:Any=None, guard_config_path:Any=None, guard:Any=None, engine:Any=None)",55-79,false,25,5,creates
      ProcessChain.execute,method,"(extra_context:Any=None, approval_callback:Any=None, dry_run:bool=False) -> ProcessResult",81-135,true,55,6,Execute the full process chain.
      ProcessChain._execute_step,method,"(step:ProcessStep, ctx:dict[str,str], approval_callback:Any, dry_run:bool) -> StepResult",137-219,true,83,15,Execute a single step in the chain.
      ProcessChain.get_audit_log,method,"() -> list[dict[str, Any]]",221-222,false,2,2,retrieves audit log
      ProcessChain._audit_step,method,"(step_name:str, prompt:str, response:str) -> None",224-232,false,9,2,audit step
      ProcessChain._load_process_config,method,"(path:Path) -> ProcessConfig",235-248,false,14,3,retrieves process config
  prellm/analyzers/bias_detector.py:
    functions[2]{name,kind,sig,loc,async,lines,cc,does}:
      BiasDetector.__init__,method,"(patterns:Any=None)",38-49,false,12,4,creates
      BiasDetector.analyze,method,"(query:str) -> AnalysisResult",51-96,false,46,11,Analyze a query for bias patterns and ambiguity.
  prellm/analyzers/context_engine.py:
    functions[6]{name,kind,sig,loc,async,lines,cc,does}:
      ContextEngine.__init__,method,"(context_sources:Any=None)",16-17,false,2,2,creates
      ContextEngine.gather,method,"() -> dict[str, str]",19-31,false,13,5,Gather all configured context into a flat dict.
      ContextEngine.enrich_prompt,method,"(prompt:str, extra:Any=None) -> str",33-43,false,11,3,"Substitute {VARIABLE} placeholders in a prompt with gathered context."
      ContextEngine._gather_env,method,"(keys:list[str]) -> dict[str, str]",46-52,false,7,3,gather env
      ContextEngine._gather_git,method,"(fields:list[str]) -> dict[str, str]",55-74,false,20,5,gather git
      ContextEngine._gather_system,method,"(fields:list[str]) -> dict[str, str]",77-90,false,14,3,gather system
